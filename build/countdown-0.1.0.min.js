(function(){"use strict";function t(t,n,e,i){var o,s;n||(n={}),-1!==t.indexOf(".")&&(s=t.split("."),t=s[0],s.shift(),n["class"]=s.join(" ")),-1!==t.indexOf("#")&&(s=t.split("#"),t=s[0],n.id=s[1]),o=document.createElement(t);for(var l in n)o.setAttribute(l,n[l]);return e&&e.appendChild(o),i&&(o.innerHTML=i),o}function n(t,n,e){return void 0===e&&t&&void 0!==t.getAttribute?t.getAttribute(n):void i(t,function(t){t.setAttribute(n,e)})}function e(t){void 0===t&&(t={});var n={};for(var e in u)n[e]=void 0!==t[e]?t[e]:u[e];return n}function i(t,n){!t||0===t.length&&t!=window||(t.length?Array.prototype.forEach.call(t,function(t,e){n(t)}):n(t))}function o(t,n){i(t,function(t){if(t.classList){var e=n.split(" ");for(var i in e)t.classList.add(e[i])}else t.className+=" "+n})}var s={sv:{day:"dag",dayFull:"dag",dayFullPlu:"dagar",year:"år",yearFull:"år",yearFullPlu:"år",month:"mån",monthFull:"månad",monthFullPlu:"månader",hour:"tim",hourFull:"timme",hourFullPlu:"timmar",minute:"min",minuteFull:"minut",minuteFullPlu:"minuter",second:"sek",secondFull:"sekund",secondFullPlu:"sekunder"},en:{day:"day",dayFull:"day",dayFullPlu:"day",year:"year",yearFull:"year",yearFullPlu:"year",month:"mon",monthFull:"month",monthFullPlu:"month",hour:"hour",hourFull:"hour",hourFullPlu:"hour",minute:"min",minuteFull:"minute",minuteFullPlu:"minute",second:"sec",secondFull:"second",secondFullPlu:"second"}},l={};l.second=1e3,l.minute=60*l.second,l.hour=60*l.minute,l.day=24*l.hour,l.month=30*l.day,l.year=365*l.day;var u={title:null,el:null,datetime:null,lang:"sv",done:null,bg:null,bgPosition:"center",theme:"light",unittype:""},h=function(n,i){if(this.opt=e(i),n){if(this.container=n,this.opt.bg&&(this.container.style.backgroundImage="url("+this.opt.bg+")"),this.opt.bg&&this.opt.bgPosition&&(this.container.style.backgroundPosition=this.opt.bgPosition),this.contentEl=t("div.content",null,this.container),this.textEl=t("div.text",null,this.contentEl),this.tickerEl=t("div.ticker",null,this.contentEl),this.time=new Date,this.countDownInitiated=!1,this.countDownFinished=!1,this.opt.datetime){var s=this.opt.datetime.split(" ");this.time=new Date(s[0]);var l=s[1].split(":");l.length>0&&this.time.setHours(parseInt(l[0])),l.length>1&&this.time.setMinutes(parseInt(l[1])),l.length>2&&this.time.setSeconds(parseInt(l[2]))}this.opt.done&&(this.utterance=new SpeechSynthesisUtterance(this.opt.done),this.utterance.lang="sv"==this.opt.lang?"sv-SE":"en-US"),o(this.contentEl,this.opt.theme),this.textEl.innerHTML=this.opt.title,this.units=["year","month","day","hour","minute","second"];for(var u in this.units){var h=this.units[u];t("span.time",{"data-unit":h},this.tickerEl)}this.ticker(),this.interval=setInterval(this.ticker.bind(this),100)}};h.prototype.getUnitText=function(t,n,e){return"full"==e?1!=t?s[this.opt.lang][n+"FullPlu"]:s[this.opt.lang][n+"Full"]:s[this.opt.lang][n]},h.prototype.showUnit=function(t,e){var i=this.tickerEl.querySelector('[data-unit="'+e+'"]');this.show||t[e]>0?i.textContent!==t[e].toString()&&(i.textContent=t[e],this.show=!0,n(i,"data-unit-text",this.getUnitText(t[e],e,this.opt.unittype))):(i.textContent="",n(i,"data-unit-text",""))},h.prototype.ticker=function(){var t=new Date,n=this.time-t.getTime(),e=n,i={};if(i.year=Math.floor(e/l.year),e-=i.year*l.year,i.month=Math.floor(e/l.month),e-=i.month*l.month,i.day=Math.floor(e/l.day),e-=i.day*l.day,i.hour=Math.floor(e/l.hour),e-=i.hour*l.hour,i.minute=Math.floor(e/l.minute),e-=i.minute*l.minute,i.second=Math.floor(e/l.second),0>n)return this.interval&&clearInterval(this.interval),this.opt.done&&(this.textEl.innerHTML=this.opt.done),void(!this.countDownFinished&&this.utterance&&(this.countDownFinished=!0,window.speechSynthesis.speak(this.utterance)));this.show=!1;for(var o in this.units)this.showUnit(i,this.units[o]);if(11>n/1e3&&!this.countDownInitiated){this.countDownInitiated=!0;for(var s="",u=i.second;u>0;u--)s+=u+". ";var h=new SpeechSynthesisUtterance(s);h.lang="sv"==this.opt.lang?"sv-SE":"en-US",h.rate=.7,window.speechSynthesis.speak(h)}else i.second>10&&(this.countDownInitiated=!1)},this.Countdown=function(t,n){var e=new h(t,n);return e},this.Countdown.globals=u}).call(this);