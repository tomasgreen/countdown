(function(){"use strict";function t(t,n,e,s){var i,a;n||(n={}),-1!==t.indexOf(".")&&(a=t.split("."),t=a[0],a.shift(),n["class"]=a.join(" ")),-1!==t.indexOf("#")&&(a=t.split("#"),t=a[0],n.id=a[1]),i=document.createElement(t);for(var o in n)i.setAttribute(o,n[o]);return e&&e.appendChild(i),s&&(i.innerHTML=s),i}function n(t){void 0===t&&(t={});var n={};for(var e in o)n[e]=void 0!==t[e]?t[e]:o[e];return n}function e(t,n){!t||0===t.length&&t!=window||(t.length?Array.prototype.forEach.call(t,function(t,e){n(t)}):n(t))}function s(t,n){e(t,function(t){if(t.classList){var e=n.split(" ");for(var s in e)t.classList.add(e[s])}else t.className+=" "+n})}var i={sv:{day:"dag",dayFull:"dag",dayFullPlu:"dagar",year:"år",yearFull:"år",yearFullPlu:"år",month:"mån",monthFull:"månad",monthFullPlu:"månader",hour:"tim",hourFull:"timme",hourFullPlu:"timmar",minute:"min",minuteFull:"minut",minuteFullPlu:"minuter",second:"sek",secondFull:"sekund",secondFullPlu:"sekunder"},en:{day:"day",dayFull:"day",dayFullPlu:"days",year:"year",yearFull:"year",yearFullPlu:"years",month:"mon",monthFull:"month",monthFullPlu:"months",hour:"hour",hourFull:"hour",hourFullPlu:"hours",minute:"min",minuteFull:"minute",minuteFullPlu:"minutes",second:"sec",secondFull:"second",secondFullPlu:"seconds"}},a={};a.second=1e3,a.minute=60*a.second,a.hour=60*a.minute,a.day=24*a.hour,a.month=30*a.day,a.year=365*a.day;var o={title:null,el:null,datetime:null,lang:"sv",done:null,bg:"",theme:"light",unittype:""},l=function(e,i){if(this.opt=n(i),e){if(this.container=e,this.container.style.backgroundImage="url("+this.opt.bg+")",this.contentEl=t("div.content",null,this.container),this.textEl=t("div.text",null,this.contentEl),this.tickerEl=t("div.ticker",null,this.contentEl),this.time=new Date,this.countDownInitiated=!1,this.countDownFinished=!1,this.opt.datetime){var a=this.opt.datetime.split(" ");this.time=new Date(a[0]);var o=a[1].split(":");o.length>0&&this.time.setHours(parseInt(o[0])),o.length>1&&this.time.setMinutes(parseInt(o[1])),o.length>2&&this.time.setSeconds(parseInt(o[2]))}this.opt.done&&(this.utterance=new SpeechSynthesisUtterance(this.opt.done),this.utterance.lang="sv"==this.opt.lang?"sv-SE":"en-US"),s(this.contentEl,this.opt.theme),this.textEl.innerHTML=this.opt.title,this.ticker(),this.interval=setInterval(this.ticker.bind(this),1e3)}};l.prototype.getUnitText=function(t,n,e){return"full"==e?1!=t?i[this.opt.lang][n+"FullPlu"]:i[this.opt.lang][n+"Full"]:i[this.opt.lang][n]},l.prototype.ticker=function(){var t=new Date,n=this.time-t.getTime(),e=n,s={};if(s.years=Math.floor(e/a.year),e-=s.years*a.year,s.months=Math.floor(e/a.month),e-=s.months*a.month,s.days=Math.floor(e/a.day),e-=s.days*a.day,s.hours=Math.floor(e/a.hour),e-=s.hours*a.hour,s.minutes=Math.floor(e/a.minute),e-=s.minutes*a.minute,s.seconds=Math.floor(e/a.second),0>n)return this.interval&&clearInterval(this.interval),this.tickerEl.innerHTML=this.opt.done?"":"NU!!!",this.opt.done&&(this.textEl.innerHTML=this.opt.done),void(!this.countDownFinished&&this.utterance&&(this.countDownFinished=!0,window.speechSynthesis.speak(this.utterance)));var i="",o=!1;if(s.years&&(i+='<span class="time">'+s.years+"</span>",i+='<span class="unit">'+this.getUnitText(s.years,"year",this.opt.unittype)+"</span> ",o=!0),(o||s.months)&&(i+='<span class="time">'+s.months+"</span>",i+='<span class="unit">'+this.getUnitText(s.months,"month",this.opt.unittype)+"</span> ",o=!0),(o||s.days)&&(i+='<span class="time">'+s.days+"</span>",i+='<span class="unit">'+this.getUnitText(s.days,"day",this.opt.unittype)+"</span> ",o=!0),(o||s.hours)&&(i+='<span class="time">'+s.hours+"</span>",i+='<span class="unit">'+this.getUnitText(s.hours,"hour",this.opt.unittype)+"</span> ",o=!0),(o||s.minutes)&&(i+='<span class="time">'+s.minutes+"</span>",i+='<span class="unit">'+this.getUnitText(s.minutes,"minute",this.opt.unittype)+"</span> ",o=!0),(o||s.seconds)&&(i+='<span class="time">'+s.seconds+"</span>",i+='<span class="unit">'+this.getUnitText(s.seconds,"second",this.opt.unittype)+"</span> "),this.tickerEl.innerHTML=i,11>n/1e3&&!this.countDownInitiated){this.countDownInitiated=!0;for(var l="",u=s.seconds;u>0;u--)l+=u+". ";var h=new SpeechSynthesisUtterance(l);h.lang="sv"==this.opt.lang?"sv-SE":"en-US",h.rate=.6,window.speechSynthesis.speak(h)}else s.seconds>10&&(this.countDownInitiated=!1)},this.Countdown=function(t,n){var e=new l(t,n);return e},this.Countdown.globals=o}).call(this);