(function(){"use strict";function t(t,n,i,e){var o,s;n||(n={}),-1!==t.indexOf(".")&&(s=t.split("."),t=s[0],s.shift(),n["class"]=s.join(" ")),-1!==t.indexOf("#")&&(s=t.split("#"),t=s[0],n.id=s[1]),o=document.createElement(t);for(var l in n)o.setAttribute(l,n[l]);return i&&i.appendChild(o),e&&(o.innerHTML=e),o}function n(t,n,i){return void 0===i&&t&&void 0!==t.getAttribute?t.getAttribute(n):void e(t,function(t){t.setAttribute(n,i)})}function i(t){void 0===t&&(t={});var n={};for(var i in u)n[i]=void 0!==t[i]?t[i]:u[i];return n}function e(t,n){!t||0===t.length&&t!=window||(t.length?Array.prototype.forEach.call(t,function(t,i){n(t)}):n(t))}function o(t,n){e(t,function(t){if(t.classList){var i=n.split(" ");for(var e in i)t.classList.add(i[e])}else t.className+=" "+n})}var s={sv:{day:"dag",dayFull:"dag",dayFullPlu:"dagar",year:"år",yearFull:"år",yearFullPlu:"år",month:"mån",monthFull:"månad",monthFullPlu:"månader",hour:"tim",hourFull:"timme",hourFullPlu:"timmar",minute:"min",minuteFull:"minut",minuteFullPlu:"minuter",second:"sek",secondFull:"sekund",secondFullPlu:"sekunder"},en:{day:"day",dayFull:"day",dayFullPlu:"day",year:"year",yearFull:"year",yearFullPlu:"year",month:"mon",monthFull:"month",monthFullPlu:"month",hour:"hour",hourFull:"hour",hourFullPlu:"hour",minute:"min",minuteFull:"minute",minuteFullPlu:"minute",second:"sec",secondFull:"second",secondFullPlu:"second"}},l={};l.second=1e3,l.minute=60*l.second,l.hour=60*l.minute,l.day=24*l.hour,l.month=30*l.day,l.year=365*l.day;var u={title:null,datetime:null,minutes:null,lang:"sv",done:null,backgroundImage:null,backgroundColor:null,backgroundPosition:"center",color:"#fff",unittype:""},r=function(e,s){if(this.opt=i(s),console.log(s),e){if(this.container=e,this.opt.backgroundColor&&(this.container.style.backgroundColor=this.opt.backgroundColor),this.opt.backgroundImage){o(this.container,"countdown-img");var l=new Image;l.onload=function(){this.container.style.backgroundImage="url("+this.opt.backgroundImage+")"}.bind(this),l.src=this.opt.backgroundImage,this.opt.backgroundPosition&&(this.container.style.backgroundPosition=this.opt.backgroundPosition)}if(this.contentEl=t("div.content",null,this.container),this.textEl=t("div.text",null,this.contentEl),this.tickerEl=t("div.ticker",null,this.contentEl),this.time=new Date,this.countDownInitiated=!1,this.countDownFinished=!1,this.opt.datetime){var u=this.opt.datetime.split(" ");this.time=new Date(u[0]);var r=u[1].split(":");r.length>0&&this.time.setHours(parseInt(r[0])),r.length>1&&this.time.setMinutes(parseInt(r[1])),r.length>2&&this.time.setSeconds(parseInt(r[2]))}else this.opt.minutes&&(this.time=new Date(this.time.getTime()+6e4*this.opt.minutes));this.opt.done&&(this.utterance=new SpeechSynthesisUtterance(this.opt.done),this.utterance.lang="sv"==this.opt.lang?"sv-SE":"en-US"),this.opt.color&&(this.container.style.color=this.opt.color),this.textEl.innerHTML=this.opt.title,this.units=["year","month","day","hour","minute","second"];for(var a in this.units){var h=this.units[a];t("span.time",{"data-unit":h},this.tickerEl)}n(this.container,"data-unittype",this.opt.unittype),this.ticker(),this.interval=setInterval(this.ticker.bind(this),100)}};r.prototype.getUnitText=function(t,n,i){return"full"==i?1!=t?s[this.opt.lang][n+"FullPlu"]:s[this.opt.lang][n+"Full"]:s[this.opt.lang][n]},r.prototype.showUnit=function(t,i){var e=this.tickerEl.querySelector('[data-unit="'+i+'"]');this.show||t[i]>0?(this.show=!0,e.textContent!==t[i].toString()&&(e.textContent=t[i],n(e,"data-unit-text",this.getUnitText(t[i],i,this.opt.unittype)))):(e.textContent="",n(e,"data-unit-text",""))},r.prototype.ticker=function(){var t=new Date,n=this.time-t.getTime(),i=n,e={};if(e.year=Math.floor(i/l.year),i-=e.year*l.year,e.month=Math.floor(i/l.month),i-=e.month*l.month,e.day=Math.floor(i/l.day),i-=e.day*l.day,e.hour=Math.floor(i/l.hour),i-=e.hour*l.hour,e.minute=Math.floor(i/l.minute),i-=e.minute*l.minute,e.second=Math.floor(i/l.second),0>n)return this.interval&&clearInterval(this.interval),this.opt.done&&(this.textEl.innerHTML=this.opt.done),void(!this.countDownFinished&&this.utterance&&(this.countDownFinished=!0,window.speechSynthesis.speak(this.utterance)));this.show=!1;for(var o in this.units)this.showUnit(e,this.units[o]);if(11>n/1e3&&!this.countDownInitiated){this.countDownInitiated=!0;for(var s="",u=e.second;u>0;u--)s+=u+". ";var r=new SpeechSynthesisUtterance(s);r.lang="sv"==this.opt.lang?"sv-SE":"en-US",r.rate=.7,window.speechSynthesis.speak(r)}else e.second>10&&(this.countDownInitiated=!1)},this.Countdown=function(t,n){var i=new r(t,n);return i},this.Countdown.globals=u}).call(this);